<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Que Marshall Profile - Mageza App</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        var map = L.map('map').setView([-26.2041, 28.0473], 12); // Johannesburg default
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
          maxZoom: 19,
          attribution: 'Â© OpenStreetMap'
        }).addTo(map);
        window.leafletMap = map;
      });
    </script>
</head>
<body>
    <div class="profile-container">
      <div class="greeting-responsive">
        <h1 id="greeting"></h1>
      </div>
      <div class="profile-pic-wrapper">
        <img id="profilePic" src="mageza-logo.png" alt="Profile Picture">
      </div>
      <button class="modern-btn" onclick="document.getElementById('profileUpload').click()">Change Picture</button>
      <input type="file" id="profileUpload" style="display:none" accept="image/*" onchange="changeProfilePic(event)">
      <p>Monitor queues, manage taxi dispatch, and communicate with drivers here.</p>
      <div id="map" style="width:100%;height:260px;margin:1.2em 0 1.2em 0;border-radius:14px;box-shadow:0 4px 24px 0 rgba(0,0,0,0.13), 0 1.5px 8px 0 rgba(0,0,0,0.08);overflow:hidden;"></div>
      <div style="display:flex;justify-content:center;gap:1.5em;margin:1.2em 0 0.5em 0;">
        <a href="#" style="display:flex;flex-direction:column;align-items:center;text-decoration:none;">
          <img src="passenger.png" alt="Monitor Queues" class="action-icon" style="background:#e0f7fa;box-shadow:0 4px 16px #00e67655,0 0 0 2px #fff;">
          <span style="color:#009688;font-weight:600;margin-top:0.2em;font-size:0.95em;">Monitor Queues</span>
        </a>
        <a href="#" style="display:flex;flex-direction:column;align-items:center;text-decoration:none;">
          <img src="Marshal logo.png" alt="Dispatch Taxis" class="action-icon" style="background:#fffde7;box-shadow:0 4px 16px #ffd60055,0 0 0 2px #fff;">
          <span style="color:#fbc02d;font-weight:600;margin-top:0.2em;font-size:0.95em;">Dispatch Taxis</span>
        </a>
        <a href="#" style="display:flex;flex-direction:column;align-items:center;text-decoration:none;">
          <img src="communication.png" alt="Communication" class="action-icon" style="background:#e3f2fd;box-shadow:0 4px 16px #2979ff55,0 0 0 2px #fff;">
          <span style="color:#1976d2;font-weight:600;margin-top:0.2em;font-size:0.95em;">Communication</span>
        </a>
      </div>
      <button class="modern-btn" onclick="window.location.href='index.html'">Logout</button>
    </div>
    <script>
      // Profile picture upload logic
      function changeProfilePic(event) {
        const file = event.target.files[0];
        if (file) {
          const reader = new FileReader();
          reader.onload = function(e) {
            document.getElementById('profilePic').src = e.target.result;
            // Send profile image to backend
            fetch('http://localhost:5000/api/profile', {
              method: 'POST',
              headers: { 'Content-Type': 'application/json' },
              body: JSON.stringify({ image: e.target.result })
            })
            .then(res => res.json())
            .then(data => {
              if(data.success){
                console.log('Profile picture saved!');
              }
            })
            .catch(err => console.error('Error saving profile:', err));
          };
          reader.readAsDataURL(file);
        }
      }
    </script>
    <script>
      // Responsive greeting
      function getGreeting() {
        const hour = new Date().getHours();
        if (hour < 12) return 'Good morning, Que Marshall!';
        if (hour < 18) return 'Good afternoon, Que Marshall!';
        return 'Good evening, Que Marshall!';
      }
      document.getElementById('greeting').textContent = getGreeting();
    </script>
    <style>
      .greeting-responsive h1 {
        font-size: 2.2em;
        margin: 0.5em 0 0.7em 0;
        text-align: center;
        color: #1976d2;
        font-weight: 700;
        letter-spacing: 1px;
      }
      @media (max-width: 600px) {
        .greeting-responsive h1 { font-size: 1.3em; }
      }
      .profile-container {
        /* ...existing styles... */
      }
      .action-icon {
        height: 2.5em;
        width: 2.5em;
        border-radius: 12px;
        background: #fff;
        box-shadow:
          0 4px 16px 0 rgba(25, 118, 210, 0.18),
          0 2px 8px 0 rgba(0,0,0,0.10),
          0 0 0 2px #fff;
        filter: brightness(1.2) saturate(1.3);
        transition: box-shadow 0.2s;
      }
      .action-icon:hover {
        box-shadow:
          0 8px 24px 0 rgba(25, 118, 210, 0.28),
          0 4px 16px 0 rgba(0,0,0,0.13),
          0 0 0 2.5px #1976d2;
      }
    </style>
  <footer>
    <p>&copy; 2025 Mageza App. All rights reserved.</p>
    <p>Developed by the Mageza team.</p>
  </footer>
  </body>
</html>