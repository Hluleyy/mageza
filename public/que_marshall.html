<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Que Marshall Profile - Mageza App</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        var map = L.map('map').setView([-26.2041, 28.0473], 12); // Johannesburg default
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
          maxZoom: 19,
          attribution: 'Â© OpenStreetMap'
        }).addTo(map);
        window.leafletMap = map;
      });
    </script>
    <style>
      .greeting-responsive h1 {
        font-size: 2.2em;
        margin: 0.5em 0 0.7em 0;
        text-align: center;
        color: #1976d2;
        font-weight: 700;
        letter-spacing: 1px;
      }
      @media (max-width: 600px) {
        .greeting-responsive h1 { font-size: 1.3em; }
      }
      
      .profile-container {
        max-width: 950px;
        margin: 0 auto;
        padding: 1rem;
      }
      
      .profile-pic-wrapper {
        display: flex;
        justify-content: center;
        margin: 1rem 0;
      }
      
      #profilePic {
        width: 120px;
        height: 120px;
        border-radius: 50%;
        object-fit: cover;
        border: 3px solid #1976d2;
        box-shadow: 0 4px 8px rgba(0,0,0,0.1);
      }
      
      .modern-btn {
        display: block;
        margin: 1rem auto;
        padding: 0.7rem 1.5rem;
        background: linear-gradient(135deg, #1976d2 0%, #2196f3 100%);
        color: white;
        border: none;
        border-radius: 8px;
        font-size: 1rem;
        font-weight: 600;
        cursor: pointer;
        box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        transition: all 0.3s ease;
      }
      
      .modern-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        background: linear-gradient(135deg, #1565c0 0%, #1976d2 100%);
      }
      
      #map {
        width: 100%;
        height: 260px;
        margin: 1.2em 0;
        border-radius: 14px;
        box-shadow: 0 4px 24px 0 rgba(0,0,0,0.13), 0 1.5px 8px 0 rgba(0,0,0,0.08);
        overflow: hidden;
      }
      
      /* Improved Action Links Styling */
      .action-links-container {
        display: flex;
        justify-content: center;
        gap: 1.5em;
        margin: 1.2em 0 0.5em 0;
        flex-wrap: wrap;
      }
      
      .action-link {
        display: flex;
        flex-direction: column;
        align-items: center;
        text-decoration: none;
        padding: 1rem;
        border-radius: 12px;
        background: #ffffff;
        box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
        transition: all 0.3s ease;
        min-width: 120px;
      }
      
      .action-link:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
      }
      
      .action-icon {
        height: 2.5em;
        width: 2.5em;
        border-radius: 12px;
        background: #fff;
        box-shadow: 0 4px 16px 0 rgba(25, 118, 210, 0.18),
                    0 2px 8px 0 rgba(0,0,0,0.10),
                    0 0 0 2px #fff;
        filter: brightness(1.2) saturate(1.3);
        transition: box-shadow 0.2s;
        margin-bottom: 0.5rem;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.5em;
      }
      
      .action-label {
        color: #1976d2;
        font-weight: 600;
        margin-top: 0.2em;
        font-size: 0.95em;
        text-align: center;
      }
      
      .action-link:nth-child(1) .action-icon {
        background: #e0f7fa;
        box-shadow: 0 4px 16px #03f781d0, 0 0 0 2px #fff;
        color: #009688;
      }
      
      .action-link:nth-child(1) .action-label {
        color: #009688;
      }
      
      .action-link:nth-child(2) .action-icon {
        background: #fffde7;
        box-shadow: 0 4px 16px #ffd60055, 0 0 0 2px #fff;
        color: #fbc02d;
      }
      
      .action-link:nth-child(2) .action-label {
        color: #fbc02d;
      }
      
      .action-link:nth-child(3) .action-icon {
        background: #e3f2fd;
        box-shadow: 0 4px 16px #2979ff55, 0 0 0 2px #fff;
        color: #1976d2;
      }
      
      .action-link:nth-child(3) .action-label {
        color: #1976d2;
      }
      
      @media (max-width: 600px) {
        .action-links-container {
          flex-direction: column;
          align-items: center;
        }
        
        .action-link {
          width: 80%;
        }
      }
      
      footer {
        text-align: center;
        margin-top: 2rem;
        padding: 1rem;
        background: #f5f5f5;
        border-radius: 8px;
      }
    </style>
</head>
<body>
    <div class="profile-container">
      <div class="greeting-responsive">
        <h1 id="greeting"></h1>
      </div>
      <div class="profile-pic-wrapper">
        <img id="profilePic" src="mageza-logo.png" alt="Profile Picture">
      </div>
      <button class="modern-btn" onclick="document.getElementById('profileUpload').click()">Change Picture</button>
      <input type="file" id="profileUpload" style="display:none" accept="image/*" onchange="changeProfilePic(event)">
      <p>Monitor queues, manage taxi dispatch, and communicate with drivers here.</p>
      <div id="map"></div>
      
      <!-- Improved Action Links -->
      <div class="action-links-container">
        <a href="#" class="action-link">
          <div class="action-icon">
            <i class="fas fa-list"></i>
          </div>
          <span class="action-label">Monitor Queues</span>
        </a>
        <a href="#" class="action-link">
          <div class="action-icon">
            <i class="fas fa-taxi"></i>
          </div>
          <span class="action-label">Dispatch Taxis</span>
        </a>
        <a href="#" class="action-link">
          <div class="action-icon">
            <i class="fas fa-comments"></i>
          </div>
          <span class="action-label">Communication</span>
        </a>
      </div>
      
      <button class="modern-btn" onclick="window.location.href='index.html'">Logout</button>
    </div>
    
    <script>
      // Profile picture upload logic
      function changeProfilePic(event) {
        const file = event.target.files[0];
        if (file) {
          const reader = new FileReader();
          reader.onload = function(e) {
            document.getElementById('profilePic').src = e.target.result;
            // Send profile image to backend
            fetch('http://localhost:5000/api/profile', {
              method: 'POST',
              headers: { 'Content-Type': 'application/json' },
              body: JSON.stringify({ image: e.target.result })
            })
            .then(res => res.json())
            .then(data => {
              if(data.success){
                console.log('Profile picture saved!');
              }
            })
            .catch(err => console.error('Error saving profile:', err));
          };
          reader.readAsDataURL(file);
        }
      }
    </script>
    
    <script>
      // Responsive greeting
      function getGreeting() {
        const hour = new Date().getHours();
        if (hour < 12) return 'Good morning, Que Marshall!';
        if (hour < 18) return 'Good afternoon, Que Marshall!';
        return 'Good evening, Que Marshall!';
      }
      document.getElementById('greeting').textContent = getGreeting();
    </script>
<div>    
  <footer>
    <p>&copy; 2025 Mageza App. All rights reserved.</p>
    <p>Developed by the Mageza team.</p>
  </footer>
</div>  
</body>
</html>
